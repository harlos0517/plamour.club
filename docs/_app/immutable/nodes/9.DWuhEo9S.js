import{s as ae,a as ie,n as J,r as oe,f as fe,t as he}from"../chunks/scheduler.qAf2VIfS.js";import{S as ce,i as de,e as T,s as G,h as ge,c as M,d as y,a as L,b as K,f as m,g as O,j as E,k as P,v as F,q as B,p as re,r as le,w as v,u as H,x as ne}from"../chunks/index.CJ9rk06x.js";import{e as z}from"../chunks/each.D6YF6ztN.js";import{f as ue}from"../chunks/index.DpDqtowM.js";const we=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,{document:C}=we;function Q(e,o,r){const l=e.slice();return l[21]=o[r].clue,l[22]=o[r].row,l[23]=o[r].col,l[24]=o,l[25]=r,l}function X(e,o,r){const l=e.slice();return l[22]=o[r],l[25]=r,l}function Y(e,o,r){const l=e.slice();return l[27]=o[r],l[29]=r,l}function Z(e){let o,r,l=e[1][e[25]][e[29]]+"",i,p,a,b;function D(){return e[12](e[25],e[29])}return{c(){o=T("div"),r=T("span"),i=re(l),p=G(),this.h()},l(u){o=M(u,"DIV",{class:!0,role:!0,tabindex:!0});var c=K(o);r=M(c,"SPAN",{});var t=K(r);i=le(t,l),t.forEach(y),p=L(c),c.forEach(y),this.h()},h(){m(o,"class","flex flex-start absolute items-center justify-center border border-gray-300 bg-black transition-colors svelte-1mli9ry"),m(o,"role","button"),m(o,"tabindex","0"),v(o,"bg-sky-950",(e[25]!==e[6].row||e[29]!==e[6].col)&&e[10](e[25],e[29],e[0][e[7]])),v(o,"bg-sky-800",e[25]===e[6].row&&e[29]===e[6].col),O(o,"top",e[25]*N+"px"),O(o,"left",e[29]*N+"px"),O(o,"width",N+1+"px"),O(o,"height",N+1+"px")},m(u,c){P(u,o,c),E(o,r),E(r,i),E(o,p),a||(b=[H(o,"click",D),H(o,"keydown",_e)],a=!0)},p(u,c){e=u,c&2&&l!==(l=e[1][e[25]][e[29]]+"")&&ne(i,l),c&1217&&v(o,"bg-sky-950",(e[25]!==e[6].row||e[29]!==e[6].col)&&e[10](e[25],e[29],e[0][e[7]])),c&64&&v(o,"bg-sky-800",e[25]===e[6].row&&e[29]===e[6].col)},d(u){u&&y(o),a=!1,oe(b)}}}function $(e){let o,r=e[27]&&Z(e);return{c(){r&&r.c(),o=B()},l(l){r&&r.l(l),o=B()},m(l,i){r&&r.m(l,i),P(l,o,i)},p(l,i){l[27]?r?r.p(l,i):(r=Z(l),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(l){l&&y(o),r&&r.d(l)}}}function x(e){let o,r=z(e[22]),l=[];for(let i=0;i<r.length;i+=1)l[i]=$(Y(e,r,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();o=B()},l(i){for(let p=0;p<l.length;p+=1)l[p].l(i);o=B()},m(i,p){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(i,p);P(i,o,p)},p(i,p){if(p&3299){r=z(i[22]);let a;for(a=0;a<r.length;a+=1){const b=Y(i,r,a);l[a]?l[a].p(b,p):(l[a]=$(b),l[a].c(),l[a].m(o.parentNode,o))}for(;a<l.length;a+=1)l[a].d(1);l.length=r.length}},d(i){i&&y(o),F(l,i)}}}function ee(e){let o,r,l=e[21]+"",i,p,a=e[25],b,D;const u=()=>e[13](o,a),c=()=>e[13](null,a);function t(){return e[14](e[25],e[22],e[23])}return{c(){o=T("div"),r=T("span"),i=re(l),p=G(),this.h()},l(w){o=M(w,"DIV",{class:!0,role:!0,tabindex:!0});var g=K(o);r=M(g,"SPAN",{});var V=K(r);i=le(V,l),V.forEach(y),p=L(g),g.forEach(y),this.h()},h(){m(o,"class","flex flex-row items-center my-4 p-4 rounded-md border-2 border-solid border-white/30 transition-colors first:mt-0 last:mb-0 svelte-1mli9ry"),m(o,"role","button"),m(o,"tabindex","0"),v(o,"bg-gray-800",e[25]===e[7]&&!e[2][e[25]]),v(o,"bg-gray-950",e[25]!==e[7]&&!e[2][e[25]]),v(o,"bg-green-950",e[25]!==e[7]&&e[2][e[25]]),v(o,"bg-green-800",e[25]===e[7]&&e[2][e[25]]),v(o,"hover:bg-gray-700",e[25]===e[7]&&!e[2][e[25]]),v(o,"hover:bg-gray-900",e[25]!==e[7]&&!e[2][e[25]]),v(o,"hover:bg-green-900",e[25]!==e[7]&&e[2][e[25]]),v(o,"hover:bg-green-700",e[25]===e[7]&&e[2][e[25]])},m(w,g){P(w,o,g),E(o,r),E(r,i),E(o,p),u(),b||(D=[H(o,"click",t),H(o,"keydown",me)],b=!0)},p(w,g){e=w,g&1&&l!==(l=e[21]+"")&&ne(i,l),a!==e[25]&&(c(),a=e[25],u()),g&132&&v(o,"bg-gray-800",e[25]===e[7]&&!e[2][e[25]]),g&132&&v(o,"bg-gray-950",e[25]!==e[7]&&!e[2][e[25]]),g&132&&v(o,"bg-green-950",e[25]!==e[7]&&e[2][e[25]]),g&132&&v(o,"bg-green-800",e[25]===e[7]&&e[2][e[25]]),g&132&&v(o,"hover:bg-gray-700",e[25]===e[7]&&!e[2][e[25]]),g&132&&v(o,"hover:bg-gray-900",e[25]!==e[7]&&!e[2][e[25]]),g&132&&v(o,"hover:bg-green-900",e[25]!==e[7]&&e[2][e[25]]),g&132&&v(o,"hover:bg-green-700",e[25]===e[7]&&e[2][e[25]])},d(w){w&&y(o),c(),b=!1,oe(D)}}}function pe(e){let o,r,l,i,p,a,b,D,u,c,t,w,g,V,q,W=z(e[5]),_=[];for(let h=0;h<W.length;h+=1)_[h]=x(X(e,W,h));let j=z(e[0]),A=[];for(let h=0;h<j.length;h+=1)A[h]=ee(Q(e,j,h));return{c(){o=T("meta"),r=T("meta"),l=T("meta"),i=T("meta"),p=T("meta"),a=T("meta"),b=T("meta"),D=G(),u=T("div"),c=T("div");for(let h=0;h<_.length;h+=1)_[h].c();t=G(),w=T("div"),g=T("div");for(let h=0;h<A.length;h+=1)A[h].c();this.h()},l(h){const k=ge("svelte-wzw0vs",C.head);o=M(k,"META",{property:!0,content:!0}),r=M(k,"META",{property:!0,content:!0}),l=M(k,"META",{property:!0,content:!0}),i=M(k,"META",{property:!0,content:!0}),p=M(k,"META",{name:!0,content:!0}),a=M(k,"META",{name:!0,content:!0}),b=M(k,"META",{name:!0,content:!0}),k.forEach(y),D=L(h),u=M(h,"DIV",{class:!0});var f=K(u);c=M(f,"DIV",{class:!0});var S=K(c);for(let d=0;d<_.length;d+=1)_[d].l(S);S.forEach(y),t=L(f),w=M(f,"DIV",{class:!0});var s=K(w);g=M(s,"DIV",{class:!0});var n=K(g);for(let d=0;d<A.length;d+=1)A[d].l(n);n.forEach(y),s.forEach(y),f.forEach(y),this.h()},h(){C.title="狗狗羊羊大冒險 - 填字遊戲",m(o,"property","og:type"),m(o,"content","website"),m(r,"property","og:title"),m(r,"content","狗狗羊羊大冒險"),m(l,"property","og:description"),m(l,"content","填字遊戲"),m(i,"property","og:url"),m(i,"content","https://plamour.club"),m(p,"name","twitter:site"),m(p,"content","@plamourlive"),m(a,"name","twitter:title"),m(a,"content","狗狗羊羊大冒險"),m(b,"name","twitter:description"),m(b,"content","填字遊戲"),m(c,"class","relative flex-grow-0 m-8"),O(c,"width",N*e[4]+"px"),O(c,"height",N*e[3]+"px"),m(g,"class","overflow-auto pr-3"),O(g,"height","calc(100dvh - 64px)"),m(w,"class","flex-1 p-8 pl-0"),m(u,"class","h-dvh flex flex-row items-center justify-center")},m(h,k){E(C.head,o),E(C.head,r),E(C.head,l),E(C.head,i),E(C.head,p),E(C.head,a),E(C.head,b),P(h,D,k),P(h,u,k),E(u,c);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(c,null);E(u,t),E(u,w),E(w,g);for(let f=0;f<A.length;f+=1)A[f]&&A[f].m(g,null);V||(q=ie(e[9].call(null,u)),V=!0)},p(h,[k]){if(k&3299){W=z(h[5]);let f;for(f=0;f<W.length;f+=1){const S=X(h,W,f);_[f]?_[f].p(S,k):(_[f]=x(S),_[f].c(),_[f].m(c,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=W.length}if(k&16&&O(c,"width",N*h[4]+"px"),k&8&&O(c,"height",N*h[3]+"px"),k&453){j=z(h[0]);let f;for(f=0;f<j.length;f+=1){const S=Q(h,j,f);A[f]?A[f].p(S,k):(A[f]=ee(S),A[f].c(),A[f].m(g,null))}for(;f<A.length;f+=1)A[f].d(1);A.length=j.length}},i:J,o:J,d(h){h&&(y(D),y(u)),y(o),y(r),y(l),y(i),y(p),y(a),y(b),F(_,h),F(A,h),V=!1,q()}}}const N=24,_e=()=>{},me=()=>{};function be(e,o,r){let l,i,p=!1,a=[],b=0,D=0,u=[],c=[];const t={row:0,col:0};let w=0,g=[];const V=async()=>{r(0,a=await ue("CROSSWORD")),r(3,b=Math.max(...a.map(s=>s.direction==="down"?s.row+s.word.length-1:s.row))+1),r(4,D=Math.max(...a.map(s=>s.direction==="across"?s.col+s.word.length-1:s.col))+1),r(5,u=Array.from({length:b},()=>Array.from({length:D},()=>""))),r(1,c=Array.from({length:b},()=>Array.from({length:D},()=>""))),a.forEach(s=>{const{direction:n,row:d,col:I,word:R}=s;for(let U=0;U<R.length;U++){const te=n==="down"?d+U:d,se=n==="across"?I+U:I;r(5,u[te][se]=R[U].toUpperCase(),u)}}),r(6,t.row=a[0].row,t),r(6,t.col=a[0].col,t),r(8,g=Array.from({length:a.length},()=>null)),document.addEventListener("keydown",j)},q=s=>{p||(V(),p=!0)},W=(s,n,d)=>d.direction==="across"&&d.row===s&&d.col<=n&&n<d.col+d.word.length||d.direction==="down"&&d.col===n&&d.row<=s&&s<d.row+d.word.length,_=(s,n)=>{var R;const d=w,I=a.filter(U=>W(s,n,U));I.length===1&&r(7,w=a.indexOf(I[0])),I.length===2&&(s===t.row&&n===t.col?w===a.indexOf(I[0])?r(7,w=a.indexOf(I[1])):r(7,w=a.indexOf(I[0])):I.includes(a[w])||r(7,w=a.indexOf(I[0]))),r(6,t.row=s,t),r(6,t.col=n,t),w!==d&&g[w]&&((R=g[w])==null||R.scrollIntoView({block:"center",inline:"center",behavior:"smooth"}))},j=async s=>{if(!(s.altKey||s.ctrlKey||s.metaKey))if(s.preventDefault(),s.key==="ArrowUp"){let n=t.row;for(;n>0;)if(n--,u[n][t.col]){_(n,t.col);break}}else if(s.key==="ArrowDown"){let n=t.row;for(;n<b-1;)if(n++,u[n][t.col]){_(n,t.col);break}}else if(s.key==="ArrowLeft"){let n=t.col;for(;n>0;)if(n--,u[t.row][n]){_(t.row,n);break}}else if(s.key==="ArrowRight"){let n=t.col;for(;n<D-1;)if(n++,u[t.row][n]){_(t.row,n);break}}else if(s.key.length===1&&s.key.match(/[a-z_ ]/i)){r(1,c[t.row][t.col]=s.key===" "?"_":s.key.toUpperCase(),c);const n=a[w];n.direction==="across"&&t.col<n.col+n.word.length-1?r(6,t.col++,t):n.direction==="down"&&t.row<n.row+n.word.length-1&&r(6,t.row++,t),await he(),i&&setTimeout(h,10)}else if(s.key==="Backspace"){const n=c[t.row][t.col],d=a[w];d.direction==="across"&&t.col>d.col&&!n?r(6,t.col--,t):d.direction==="down"&&t.row>d.row&&!n&&r(6,t.row--,t),r(1,c[t.row][t.col]="",c)}else s.key==="Enter"&&_(t.row,t.col)},A=(s,n)=>n.direction==="across"?Array.from({length:n.word.length},(d,I)=>s[n.row][n.col+I]).join(""):Array.from({length:n.word.length},(d,I)=>s[n.row+I][n.col]).join(""),h=()=>{alert(`恭喜！你完成了文字遊戲！
正在準備你的半週年禮物...
準備完成！按下確認以接受禮物！`),window.location.href="/"},k=(s,n)=>_(s,n);function f(s,n){fe[s?"unshift":"push"](()=>{g[n]=s,r(8,g)})}const S=(s,n,d)=>{r(7,w=s),r(6,t.row=n,t),r(6,t.col=d,t)};return e.$$.update=()=>{e.$$.dirty&3&&r(2,l=a.map(s=>A(c,s)===s.word.toUpperCase())),e.$$.dirty&4&&(i=l.every(s=>s))},[a,c,l,b,D,u,t,w,g,q,W,_,k,f,S]}class Ee extends ce{constructor(o){super(),de(this,o,be,pe,ae,{})}}export{Ee as component};
